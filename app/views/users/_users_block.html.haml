%table.table.users
  %thead
    %th Имя
    %th Email
    %th Роль
    %th Дата регистрации
    %th
  - if @users.nil?
    %p = t :NO_USERS_FOUND
  - @users.each do |user|
    %tr
      %td
        = link_to user_profile_path(user) do
          = truncate(user.name, :length => 30, :omission => '...')
      %td= truncate(user.email, :length => 30, :omission => '...')
      %td= t(user.highest_role)
      %td= l user.created_at.in_time_zone, format: :short
      %td
        = render :partial => "office/yes_no", :locals => { :is_true => user.is_active?, :title => 'активнен' }
      %td
        .options
          .btn-group
            %button.btn
              = link_to block_user_path(user) do
                = t :BLOCK
            %button.btn.dropdown-toggle{data:{toggle:"dropdown"}}
              %span.caret
            %ul.dropdown-menu
              %li
                = link_to change_role_user_path(user,  {role: :READER}) do
                  = t("READER")
              %li
                = link_to change_role_user_path(user,  {role: :USER}) do
                  = t("USER")
              %li
                = link_to change_role_user_path(user,  {role: :MODERATOR}) do
                  = t("MODERATOR")
              %li
                = link_to change_role_user_path(user,  {role: :ADMIN}) do
                  = t("ADMIN")

= paginate @users, :remote => true